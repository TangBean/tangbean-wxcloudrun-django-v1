from django.test import TestCase

from wxcloudrun.apps.message.domain.chain_message.chain_message_service import ChainMsgService
from wxcloudrun.apps.message.models import Message


class ChainMsgServiceTest(TestCase):
    test_msgs = [
        '#æ¥é¾™\nè¿™å°±è‡ªå·±å¹²ï¼\n4.24\n\n1. é½æ ¼ åœ¨å†™ å¾®ä¿¡ç¾¤æ¥é¾™ Report Generation Featureï¼Œå®Œæˆæƒ…å†µå¦‚ä¸‹ï¼š\n* è®¾è®¡æ•°æ®åº“ç»“æ„ ï¼Œåˆ›å»ºäº†ä¸€ä¸ªè¡¨ï¼Œprojectçš„è¡¨è¿˜æ²¡åˆ›å»º\n* å†™å…¥æ¶ˆæ¯åŠŸèƒ½ï¼Œè¿˜æ²¡å¾€æ•°æ®åº“å†™ï¼Œè¿˜æœ‰æ—¥æœŸ projectè§£æåŠŸèƒ½éœ€è¦å¼€å‘\n* æ”¶åˆ°æ¶ˆæ¯å›å¤æ˜¯å¦å†™å…¥æˆåŠŸåŠŸèƒ½ï¼šéªŒè¯äº†å¯ä»¥é€šè¿‡è¢«åŠ¨æ¶ˆæ¯å›å¤ç”¨æˆ·\n* æ˜¨å¤©è°ƒç¯å¢ƒè°ƒäº†å¥½ä¹…ï¼Œéº»è›‹æŠŠæ•°æ®åº“å¯†ç æ”¹äº†è‡ªå·±ç»™å¿˜äº†ã€‚ã€‚\n2. é¢œæ³± 1. å°è¯•äº†ä¸€ä¸‹æŠŠunityä»£ç ä¼ å…¥githubã€‚ä¸º5.1å¼‚åœ°ç»§ç»­è¯¾ç¨‹åšå‡†å¤‡ã€‚2. è‚å·¥ä½œï¼Œç¬¬äºŒä¸ªä»»åŠ¡æ‹¿åˆ°äº†ä¸€äº›ä¼˜åŒ–ã€‚3. ä½¿ç”¨æ›´è¯¦ç»†çš„æ¡ä»¶è®©chatgptå¸®å¿™ç”Ÿæˆè‡ªåŠ¨åœ°å›¾ï¼Œè¿˜æ²¡æµ‹è¯•\n3. Saltyfish 1.æŠŠä¸Šæ¬¡è§†é¢‘9çš„å®ç°å®Œæˆäº† 2.çœ‹qigeå†™çš„æ–‡æ¡£',
        '#æ¥é¾™\nä¾‹ 5ï¼›03\n\n1. åƒå¯çˆ±é•¿å¤§çš„ğŸ‘\n2. åƒå¯çˆ±é•¿å¤§çš„ğŸ‘5:00-5:30æ´—æ¼±ï¼Œå‡ºé—¨\n3. 00-5:30æ´—æ¼±ï¼Œå‡ºé—¨\n4. ç´å­ Miyo 5:30 5:30-6:00æ´—æ¼±æ”¶æ‹¾ 6:30-8:00èµ¶é£æœº\n5. åˆ˜ç•… 5:55\n- 6:30 æ‰£æ‰‹æœºï¼Œå¾®ä¿¡é˜…è¯»\n- 7:00 å¥èº«\n- 7: 40 åšé¥­ï¼Œæ´—æ¼±\n- 9: 15 ç®—æ³•é¢˜\n6. Bean 6\n-7:30 å‡ºé—¨å¥èº«æˆ¿è·‘æ­¥å›å®¶\n-7:50 æ—©é¥­ & å¾®ä¿¡è¯»ä¹¦\n-8:20 æ¯«æ— æ„ä¹‰çš„åˆ·æ‰‹æœº\n-8:50 åœ¨æ»´ç­”æ¸…å•é‡Œåˆ—æœ€è¿‘æƒ³å®ç°çš„ä¸€ä¸ªfeatureçš„task list\n7. å¤§äº¬-ä¸Šæµ· 6:30\n-6:45åˆ·æ‰‹æœº\n-7:55æ´—æ¼±æ—©é¤èµ¶è·¯\n-8:20æŠ•èµ„ç†è´¢\n-9:00å­¦ä¹ è…¹éƒ¨è‚Œè‚‰è§£å‰–\n8. Y.jun 6.30\n6.30-6.50æ‰è‚šå­ç§°ä½“é‡å–æ°´\n6.50-7.30æ‰£æ‰‹æœºç ”ç©¶æŠ—ç‚é£Ÿç‰©\n7.30-7.55è–„è·åŸè‘—\n7.55-8.30æ”¶æ‹¾å‡ºé—¨\n9. ä¸è¾¾å°”æ•ˆåº” 7\n-7.30 æ•´ç†ä¸œè¥¿\n-8.20 æ´—æ¼±åŒ–å¦†\n-9.00 çœ‹æ¼«ç”»\n10. å¤§èƒèŸ¹ 7-8:40\n-8:00 è¡¥è§‰\n-8:40 æ´—æ¼±æ”¶æ‹¾ï¼Œæ™¾è¡£æœ\n11. å½±å¦¹ 7:10\n7:10 -8:00 å­¦ä¹ å¤‡è€ƒè§†é¢‘+keep\nå‡ºé—¨\n12. W 7:20-8:30æ´—æ¼±åƒæ—©é¤åŒ–å¦†æ¢è¡£æœ\n8:30-9:20ç©æ‰‹æœºé—­ç›®å…»ç¥\n9:20-9:40é€šå‹¤ä¸Šç­\n13. å’Œå°š 7.40-9.30\u2028-8.32 æ‰£æ‰‹æœºæ´—æ¼±å’–å•¡\u2028-9.31 å†™ç‚¹ç¢ç¢å¿µï¼ˆçªç„¶æ„è¯†åˆ°ï¼Œä¸ºä»€ä¹ˆæˆ‘å¯ä»¥è¿™ä¹ˆèƒ½å­å­å­ï¼Œå†™è¿™ä¹ˆä¹…ï¼‰\u2028-9.38 å‡†å¤‡æ—©é¤\n14. Shen 7.30\n15. å†°é£é™Œ 6.35 6.35-6.55æ´—æ¼±ï¼Œ6.55-7.05ç…®æ°´å–æ°´ï¼Œ7.05-8.35çœ‹æ•™å­¦è§†é¢‘ï¼Œ8.35-8.50æ”¶æ‹¾ä¸Šç­\n16. XQian 6:30èººç€-7:00æ´—å¤´å‘-8:20åƒé¥­æ”¶æ‹¾-9:20çœ‹åŠ¨ç”»-9:42é€šå‹¤',
    ]
    for test_msg in test_msgs:
        message = Message(
            msg_id='MsgId',
            msg_type='MsgType',
            to_user_name='ToUserName',
            from_user_name='FromUserName',
            create_time='CreateTime',
            content=test_msg,
        )
        service = ChainMsgService(message)
        project_message = service.parse_project_message()
        service.parse_message_content()
        print(project_message)
        print(service.message.content)
